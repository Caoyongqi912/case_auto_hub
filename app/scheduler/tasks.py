#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2025/4/3# @Author : cyq# @File : tasks# @Software: PyCharm# @Desc:from redis.asyncio import Redisfrom common import RedisClientfrom enums import StarterEnumfrom interface.starter import APIStarterfrom interface.taskRunner import TaskRunnerfrom play.player import Playerfrom play.starter import UIStarterfrom utils import logasync def ui_task(task_id: int):    await Player(UIStarter(StarterEnum.RoBot)).run_task(task_id)async def api_task(task_id: int):    await TaskRunner(APIStarter(StarterEnum.RoBot)).runTask(task_id)async def run_heartbeat(redis: Redis, lock_key: str):    """可序列化的心跳任务函数"""    if await redis.get(lock_key):        await redis.expire(lock_key, 60)        log.debug("✅ Renewed lock")