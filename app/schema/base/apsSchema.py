#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2025/4/8# @Author : cyq# @File : apsSchema# @Software: PyCharm# @Desc:from typing import Literal, List, TypeVar, Optional, Dictfrom pydantic import BaseModel, Field, model_validatorfrom app.schema import PageSchemafrom enums import TriggerTypeEnum, ModuleEnumfrom utils import GenerateToolsJobKwargs = TypeVar("JobKwargs", List[Dict[str, str | int]], Dict[str, str | int], None)class InsertJobSchema(BaseModel):    job_type: int = Field(..., description="任务类型")    job_name: str = Field(..., description="任务名称")    job_task_id_list: List[str] = Field(..., description="任务id")    job_enabled: bool = Field(True, description="是否启用")    job_env_id: int = Field(..., description="环境id")    job_env_name: str = Field(..., description="环境名")    job_trigger_type: TriggerTypeEnum = Field(..., description="触发器类型")    job_execute_time: str | None = Field(None, description="执行时间")    job_execute_cron: str | None = Field(None, description="执行cron")    job_execute_interval: int | None = Field(None, description="执行间隔")    job_execute_interval_unit: str | None = Field(None, description="执行间隔单位")    job_max_retry_count: int | None = Field(None, description="最大重试次数")    job_retry_interval: int | None = Field(None, description="重试间隔")    job_executor: str | None = Field("AsyncIOScheduler", description="执行器")    job_kwargs: JobKwargs = Field(None, description="执行参数")    job_execute_strategy: int | None = Field(None, description="执行策略")    job_notify_type: int = Field(0, description="是否推送")    job_notify_id: int | None = Field(None, description="推送id")    job_notify_name: str | None = Field(None, description="推送名")    job_notify_on: list[int] = Field(None, description="推送时机")    module_id: int = Field(..., description="模块")    project_id: int = Field(..., description="项目id")class UpdateJobSchema(BaseModel):    uid: str = Field(..., description="任务id")    job_name: str | None = Field(None, description="任务名称")    job_task_id_list: List[str] | None = Field(None, description="任务id")    job_enabled: bool | None = Field(True, description="是否启用")    job_env_id: int | None = Field(None, description="环境id")    job_env_name: str | None = Field(None, description="环境名")    job_trigger_type: TriggerTypeEnum | None = Field(None, description="触发器类型")    job_execute_time: str | None = Field(None, description="执行时间")    job_execute_cron: str | None = Field(None, description="执行corn")    job_execute_interval: int | None = Field(None, description="执行间隔")    job_execute_interval_unit: str | None = Field(None, description="执行间隔单位")    job_max_retry_count: int | None = Field(None, description="最大重试次数")    job_retry_interval: int | None = Field(None, description="重试间隔")    job_kwargs: JobKwargs = Field(None, description="执行参数")    job_notify_type: int | None = Field(None, description="是否推送")    job_notify_id: int | None = Field(None, description="推送id")    job_notify_name: str | None = Field(None, description="推送名")    job_notify_on: list[int] | None = Field(None, description="推送时机")    module_id: int | None = Field(None, description="模块")    project_id: int | None = Field(None, description="项目id")class GetOrRemoveJobSchema(BaseModel):    job_id: int | str = Field(..., description="任务id")class ApsSwitchSchema(BaseModel):    tag: Literal["API", "UI"] = Field()    uid: str = Field()    switch: boolclass PageJobSchema(PageSchema):    job_trigger_type: TriggerTypeEnum | None = Field(None, description="触发器类型")    job_id: int | None = Field(None, description="任务id")    module_id: int | None = None    module_type: int = ModuleEnum.JOB