#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2024/11/26# @Author : cyq# @File : interfaceResultModel# @Software: PyCharm# @Desc:from sqlalchemy import Column, INTEGER, String, ForeignKey, TEXT, JSON, DATETIME, Floatfrom datetime import datetimefrom app.model import BaseModelclass InterfaceResultModel(BaseModel):    __tablename__ = 'interface_result'    interfaceID = Column(INTEGER, ForeignKey('interface.id', ondelete='CASCADE'), comment="所属用例")    interfaceName = Column(String(20), comment="用例名称")    interfaceUid = Column(String(20), comment="用例Uid")    interfaceDesc = Column(String(50), comment="用例描述")    interfaceProjectId = Column(INTEGER, comment="所属项目")    interfacePartId = Column(INTEGER, comment="所属模块")    interfaceEnvId = Column(INTEGER, comment="所属环境")    startTime = Column(DATETIME, default=datetime.now, comment="开始时间")    useTime = Column(String(50), nullable=True, comment="用时")    response_txt = Column(TEXT, nullable=True, comment="响应报文")    response_status = Column(INTEGER, comment="响应Code")    response_head = Column(JSON, nullable=True, comment="响应头")    request_head = Column(JSON, nullable=True, comment="请求头")    request_txt = Column(TEXT, nullable=True, comment="请求报文")    request_method = Column(String(10),nullable=True,comment="请求方法")    extracts = Column(JSON, nullable=True, comment="请求变量")    asserts = Column(JSON, nullable=True, comment="断言信息")    starterId = Column(INTEGER, comment="运行人ID")    starterName = Column(String(20), comment="运行人姓名")    result = Column(String(10), nullable=False, comment="运行结果")    interface_case_result_Id = Column(INTEGER, ForeignKey("interface_case_result.id",                                                          ondelete='CASCADE'), nullable=True, comment="所属case result")    def __repr__(self):        return f"<InterfaceResult(id={self.id}, interfaceID={self.interfaceID}, interfaceName={self.interfaceName}, result={self.result})>"class InterfaceCaseResultModel(BaseModel):    __tablename__ = 'interface_case_result'    interfaceCaseID = Column(INTEGER, ForeignKey('interface_case.id', ondelete='CASCADE'), comment="所属用例")    interfaceCaseName = Column(String(20), comment="用例名称")    interfaceCaseUid = Column(String(20), comment="用例Uid")    interfaceCaseDesc = Column(String(50), comment="用例描述")    interfaceCaseProjectId = Column(INTEGER, comment="所属项目")    interfaceCasePartId = Column(INTEGER, comment="所属模块")    interfaceLog = Column(TEXT, nullable=True, comment="运行日志")    progress = Column(Float, default=0.0, comment="进度")    startTime = Column(DATETIME, default=datetime.now, comment="开始时间")    useTime = Column(DATETIME, nullable=True, comment="用时")    total_num = Column(INTEGER, default=0, comment="总共数量")    success_num = Column(INTEGER, default=0, comment="成功数量")    fail_num = Column(INTEGER, default=0, comment="失败数量")    starterId = Column(INTEGER, comment="运行人ID")    starterName = Column(String(20), comment="运行人姓名")    status = Column(String(10), nullable=True, comment="运行状态")    result = Column(String(10), nullable=True, comment="运行结果")    def __repr__(self):        return (            f"<InterfaceCaseResult(id={self.id}, interfaceCaseID={self.interfaceCaseID}, interfaceCaseName={self.interfaceCaseName},"            f"successNum={self.success_num} failNum={self.fail_num}"            f"  result={self.result})>")