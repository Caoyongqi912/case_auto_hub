#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2024/6/6# @Author : cyq# @File : __init__.py# @Software: PyCharm# @Desc:from faker.providers.bank.en_PH import loggerfrom fastapi import FastAPIfrom fastapi.exceptions import RequestValidationErrorfrom starlette.middleware.base import BaseHTTPMiddlewarefrom starlette.middleware.errors import ServerErrorMiddlewarefrom starlette.middleware.cors import CORSMiddlewarefrom app.middware import CORS_ALLOW_ORIGINSfrom app.exception.validateError import validation_exception_handlerfrom app.exception.unknowError import errors_handling, execution_g_handlerfrom app.controller import RegisterRouterListfrom app.ws import ASGIfrom utils import logapp = FastAPI(    title="CBS_UI_APS",)# 加载路由for item in RegisterRouterList:    app.include_router(item.router)# 参数校验捕获app.add_exception_handler(    RequestValidationError,    handler=validation_exception_handler,)# 跨域app.add_middleware(    CORSMiddleware,    **CORS_ALLOW_ORIGINS)# 错误捕获app.add_middleware(    BaseHTTPMiddleware,    dispatch=errors_handling,)# 全局异常捕获app.add_middleware(    ServerErrorMiddleware,    handler=execution_g_handler,)app.mount("/ws", ASGI())