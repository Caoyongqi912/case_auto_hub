#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2024/11/20# @Author : cyq# @File : interfaceStep# @Software: PyCharm# @Desc:from fastapi import APIRouterfrom app.response import Responsefrom app.schema.interface import AddInterfaceStepSchema,TryAddInterfaceStepSchemafrom app.mapper.interface import InterfaceMapperfrom utils import MyLogurufrom interface.runner import InterFaceRunnerLOG = MyLoguru().get_logger()router = APIRouter(prefix="/interface/step", tags=['自动化接口步骤'])@router.post("/insert", description="添加步骤")async def insert_interface_step(stepInfo: AddInterfaceStepSchema):    LOG.debug(stepInfo.dict(    ))    await InterfaceMapper.save(**stepInfo.dict())    return Response.success()@router.post("/try", description="调试")async def try_interface_step(step:TryAddInterfaceStepSchema):    resp =  await InterFaceRunner().try_interface(interfaceId=step.id)    return Response.success(resp)