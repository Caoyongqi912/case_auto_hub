#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2024/11/20# @Author : cyq# @File : interfaceResult# @Software: PyCharm# @Desc:from fastapi import APIRouterfrom fastapi.params import Dependsfrom app.controller import Authenticationfrom app.mapper.interface.interfaceResultMapper import InterfaceCaseResultMapperfrom app.response import Responsefrom app.mapper.interface import InterfaceResultMapperfrom app.schema.interface import InterfaceCaseResultFieldSchemarouter = APIRouter(prefix="/interface/result", tags=['自动化接口接结果'])@router.get("/detail", description="获取结果详情")async def detail_interface_api_result(detailId: int, _=Depends(Authentication())):    detail = await InterfaceResultMapper.get_by_id(detailId)    return Response.success(detail)@router.get("/queryBy", description="查询")async def query_interface_api_result(queryId: int, _=Depends(Authentication())):    results = await InterfaceResultMapper.query_by(interfaceID=queryId)    return Response.success(results)@router.post("/case/queryBy", description="查询用例结果")async def case_interface_api_result(byInfo: InterfaceCaseResultFieldSchema, _=Depends(Authentication())):    results = await InterfaceCaseResultMapper.query_by(**byInfo.dict(        exclude_unset=True,        exclude_none=True,    ))    return Response.success(results)