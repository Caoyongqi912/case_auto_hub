#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2024/11/20# @Author : cyq# @File : interfaceResultMapper# @Software: PyCharm# @Desc:from app.mapper import Mapperfrom app.model.interface import InterfaceResultModel, InterfaceModelfrom app.model import async_sessionfrom utils import MyLogurulog = MyLoguru().get_logger()class InterfaceResultMapper(Mapper):    __model__ = InterfaceResultModel    @classmethod    async def set_result(cls,                         **kwargs):        """        接口执行 初始化 结果        """        try:            async with async_session() as session:                async with session.begin():                    c = cls.__model__(                        **kwargs                    )                    await cls.add_flush_expunge(session, c)                    return c        except Exception as e:            log.exception(e)            raise e