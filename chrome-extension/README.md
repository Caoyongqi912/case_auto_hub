# API录制助手 - Chrome扩展

## 功能介绍

API录制助手是一个功能完整的Chrome浏览器插件，用于抓取用户在网页上点击操作所触发的HTTP请求，并支持数据的存储与导出功能，以服务于接口自动化测试需求。

### 核心功能

1. **Host过滤配置**：允许用户输入特定的Host地址，插件将仅抓取与该Host完全匹配的HTTP请求。

2. **录制控制功能**：
   - 开始录制：点击后插件转换为悬浮窗形式，固定显示在浏览器窗口左侧边缘
   - 结束录制：点击悬浮窗停止HTTP请求的抓取操作

3. **HTTP请求抓取**：精确捕获用户点击操作所触发的所有符合Host过滤条件的HTTP请求，完整记录请求的URL、方法、请求头、请求体、响应状态码、响应头及响应体等关键信息。

4. **后端数据存储集成**：将录制完成的HTTP请求数据发送至后端服务器进行持久化存储。

5. **本地导出功能**：支持将录制的HTTP请求数据以JSON或HAR格式导出至用户本地文件系统。

## 安装方法

1. **下载扩展文件**：将本目录下的所有文件下载到本地。

2. **打开Chrome扩展管理页面**：
   - 在Chrome浏览器中输入 `chrome://extensions/` 并回车
   - 开启右上角的"开发者模式"

3. **加载已解压的扩展程序**：
   - 点击"加载已解压的扩展程序"
   - 选择本目录（包含manifest.json的目录）
   - 扩展将被安装并显示在扩展列表中

4. **添加扩展图标到工具栏**：
   - 点击Chrome工具栏右侧的拼图图标
   - 找到"API录制助手"扩展
   - 点击图钉图标将其固定到工具栏

## 使用步骤

1. **配置Host过滤**：
   - 点击工具栏中的扩展图标
   - 在弹出的界面中输入要过滤的Host地址（例如：`https://www.xxx.com`）
   - 点击"保存配置"按钮

2. **开始录制**：
   - 点击"开始录制"按钮
   - 扩展会关闭弹出窗口并在浏览器左侧显示悬浮窗
   - 此时开始捕获用户操作触发的HTTP请求

3. **执行操作**：
   - 在网页上进行正常的点击操作
   - 插件会自动捕获符合Host过滤条件的HTTP请求

4. **结束录制**：
   - 点击左侧的悬浮窗
   - 插件会停止录制并返回弹出界面

5. **数据管理**：
   - **导出数据**：选择导出格式（JSON或HAR），点击"导出数据"按钮
   - **同步到后端**：点击"同步到后端"按钮将数据发送到后端服务

## 注意事项

1. **权限说明**：扩展需要以下权限才能正常工作：
   - webRequest：用于监听HTTP请求
   - storage：用于存储用户配置
   - tabs：用于操作浏览器标签
   - scripting：用于注入内容脚本

2. **性能影响**：录制过程中可能会对浏览器性能产生轻微影响，建议在不需要时停止录制。

3. **数据安全**：抓取的数据可能包含敏感信息，请妥善保管导出的文件。

4. **后端服务**：同步到后端功能需要后端服务支持，默认配置为 `http://localhost:5000/api/interface/record`。

## 技术架构

- **manifest.json**：扩展配置文件
- **popup.html/popup.js**：用户交互界面
- **background.js**：后台服务，负责HTTP请求监听和数据处理
- **content.js**：内容脚本，负责显示悬浮窗
- **styles.css**：样式文件

## 版本历史

- v1.0.0：初始版本，实现所有核心功能
