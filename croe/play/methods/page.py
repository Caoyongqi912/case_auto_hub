#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2026/1/29# @Author : cyq# @File : page_methods# @Software: PyCharm# @Desc:from .base import BaseMethodsfrom ..wait.strategy import WaitStrategyfrom .context import StepContextwait_strategy = WaitStrategy()class GotoMethod(BaseMethods):    """    goto方法    """    handler_name = "play_go_to"    async def execute(self, context: StepContext) -> None:        url = await context.variable_manager.trans(context.step.fill_value)        await context.page.goto(url=url, timeout=wait_strategy.config.navigation_timeout)        await wait_strategy.wait_for_navigation(context.page)        await context.starter.send(f"跳转页面 ✅ : {url}")class ReloadMethod(BaseMethods):    handler_name = "play_reload"    async def execute(self, context: StepContext) -> None:        await context.page.reload(timeout=wait_strategy.config.navigation_timeout)        await wait_strategy.wait_for_navigation(context.page)        await context.starter.send("刷新页面 ✅")class BackMethod(BaseMethods):    handler_name = "play_back"    async def execute(self, context: StepContext) -> None:        await context.page.go_back()        await wait_strategy.wait_for_navigation(context.page)        await context.starter.send("返回上一页 ✅")class ForwardMethod(BaseMethods):    handler_name = "play_forward"    async def execute(self, context: StepContext) -> None:                await context.page.go_forward()        await wait_strategy.wait_for_navigation(context.page)        await context.starter.send("前进下一页 ✅")class WaitMethod(BaseMethods):    handler_name = "play_wait"    async def execute(self, context: StepContext) -> None:        try:            wait_time = int(context.step.fill_value)        except ValueError:            wait_time = 1        await wait_strategy.wait_for_timeout(wait_time)        await context.starter.send(f"等待 ✅ : {wait_time}ms")