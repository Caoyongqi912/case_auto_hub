#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2026/1/21# @Author : cyq# @File : step_content_wait# @Software: PyCharm# @Desc:import asynciofrom app.mapper.interface import InterfaceContentStepResultMapperfrom app.model.interface.interfaceResultModel import InterfaceCaseStepContentResultfrom croe.interface.executor.context import CaseStepContextfrom croe.interface.executor.step_content.base import StepBaseStrategyfrom croe.interface.types import InterfaceCaseContentfrom croe.interface.starter import APIStarterclass APIWaitContentStrategy(StepBaseStrategy):    async def execute(self, step_context: CaseStepContext) -> bool:        """        等待指定时间        """        wait_time = step_context.content.api_wait_time        await step_context.starter.send(f"⏰⏰  等待 {wait_time} 秒")        await asyncio.sleep(wait_time)        await set_case_step_content_api_wait_result(            step_index=step_context.index,            interface_task_result_id=step_context.task_result_id,            interface_case_result_id=step_context.case_result_id,            step_content=step_context.content,            starter=step_context.starter,        )        return Trueasync def set_case_step_content_api_wait_result(        step_index: int,        interface_case_result_id: int,        step_content: "InterfaceCaseContent",        starter: "APIStarter",        interface_task_result_id: int = None,):    """    wait    """    result = InterfaceCaseStepContentResult(        content_id=step_content.id,        content_type=step_content.content_type,        content_name=step_content.content_name,        content_desc=step_content.content_desc,        content_step=step_index,        content_result=True,        interface_case_result_id=interface_case_result_id,        interface_task_result_id=interface_task_result_id,        starter_id=starter.userId,        wait_time=step_content.api_wait_time,        starter_name=starter.username,    )    await InterfaceContentStepResultMapper.insert(result)