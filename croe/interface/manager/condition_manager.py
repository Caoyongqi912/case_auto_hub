#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2026/1/21# @Author : cyq# @File : condition_manager# @Software: PyCharm# @Desc:from typing import Anyfrom app.model.interface.InterfaceCaseStepContent import InterfaceConditionfrom croe.interface.manager.variable_manager import VariableManagerfrom utils.assertsUtil import MyAssertsfrom utils.io_sender import SocketSenderfrom enums.CaseEnum import operatorMapclass ConditionManager:    key: Any    value: Any    operator: int    condition: InterfaceCondition    def __init__(self, variable: VariableManager):        self.variable = variable    async def invoke(self, condition: InterfaceCondition, io: SocketSender) -> tuple[bool, dict]:        self.condition = condition        self.key = await self.variable.trans(condition.condition_key)        self.value = await self.variable.trans(condition.condition_value)        self.operator = condition.condition_operator        await io.send(            f"条件判断 >>  变量 {condition.condition_key}  AKA {self.key} {operatorMap[self.operator]} value {self.value}")        assert_data = {            "key": self.key,            "value": self.value,            "operator": self.operator,        }        try:            MyAsserts.option(                assertOpt=self.operator,                expect=self.value,                actual=self.key            )            assert_data["condition_result"] = True            return True, assert_data        except AssertionError as e:            await io.send(f"条件判断 >> {str(e)}")            assert_data["condition_result"] = False            return False, assert_data    @property    def doc(self):        return f"判断：IF {self.condition.condition_key}  {operatorMap[self.operator]} {self.value}"