#!/usr/bin/env python# -*- coding:utf-8 -*-# @Time : 2026/1/29# @Author : cyq# @File : __init__.py# @Software: PyCharm# @Desc:from typing import Dict, Anyfrom app.mapper.play import PlayCaseResultMapperfrom app.model.playUI import PlayCaseResultfrom utils import GenerateToolsclass PlayResultWriter:    @staticmethod    async def write_vars_info(            case_result: PlayCaseResult,            step_name: str,            extract_method: str,            varsInfo: Dict[str, Any] = None):        """        写入变量        :param extract_method:        :param case_result:        :param step_name:        :param varsInfo:        :return:        """        for k, v in varsInfo.items():            _varsInfo = {                "id": GenerateTools.getTime(3),                "step_name": step_name,                "extract_method": extract_method,                "key": k,                "value": v            }            case_result.vars_info.append(_varsInfo)        unique_dict = {}        for item in case_result.vars_info:            ck = (item['key'], item['value'])            unique_dict[ck] = item        unique_data = list(unique_dict.values())        await PlayCaseResultMapper.set_case_result_varsInfo(case_result.id, unique_data)    @staticmethod    async def write_assert_info(case_result: PlayCaseResult,                                assertsInfo: Any = None):        """        写入assertInfo        :param case_result:        :param assertsInfo:        :return:        """        if case_result.asserts_info is None:            case_result.asserts_info = []        case_result.asserts_info.extend(assertsInfo)        await PlayCaseResultMapper.set_case_result_assertInfo(case_result.id, case_result.asserts_info)